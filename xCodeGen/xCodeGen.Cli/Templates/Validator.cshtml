@model xCodeGen.Abstractions.Metadata.ClassMetadata
@{
    var namingService = Model.Utilities.GetService<NamingService>();
    var className = namingService.GetTargetName(Model.ClassName, "Validator");
    // 显式引用全路径防止冲突 [cite: 1, 5]
    var dtoFullName = $"{(Model.Namespace).Dtos}.{namingService.GetTargetName(Model.ClassName, "Dto")}";
}
using FluentValidation;

namespace @(Model.Namespace).Validators;

public partial class @className : AbstractValidator<@dtoFullName>
    {
    public @className()
    {
@foreach (var method in Model.Methods)
{
    @foreach (var param in method.Parameters)
    {
        var propName = param.Name.ToPascalCase();

        // 处理集合类型的 RuleForEach [cite: 1, 6]
        if (param.IsCollection)
        {
                <text>        RuleForEach(x => x.@propName).NotNull().WithMessage("@propName 列表项不能为空");</text>
        }
        else if (!param.IsNullable)
        {
                <text>        RuleFor(x => x.@propName).NotEmpty();</text>
        }
    }
}
    OnCustomValidation();
    }
    partial void OnCustomValidation();
    }
