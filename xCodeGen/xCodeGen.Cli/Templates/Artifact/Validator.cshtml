@model Core.Templates.TemplateInput
@using Utilities
@using FluentValidation

@* 自动生成的验证器模板 *@
// <auto-generated>此文件由xCodeGen自动生成，请勿手动修改</auto-generated>
namespace @Model.Class.Namespace.Generated.Validators;

/// <summary>
/// 自动生成的验证器，用于验证@Model.Class.Name.@Model.Method.Name方法的@Model.ArtifactType
/// </summary>
public partial class @Model.Utilities.Naming.GenerateArtifactName(Model.Class.Name, Model.Method.Name, Model.ArtifactType)Validator 
    : AbstractValidator<@Model.Class.Namespace.Generated.@Model.ArtifactType.@Model.Utilities.Naming.GenerateArtifactName(Model.Class.Name, Model.Method.Name, Model.ArtifactType)>
{
    /// <summary>
    /// 初始化验证规则
    /// </summary>
    public @Model.Utilities.Naming.GenerateArtifactName(Model.Class.Name, Model.Method.Name, Model.ArtifactType)Validator()
    {
        @foreach (var param in Model.Method.Parameters)
        {
            var propertyName = Model.Utilities.Naming.ToPascalCase(param.Name);
            var rules = Model.Utilities.Validation.GenerateValidationRules(param, propertyName);
            
            if (!string.IsNullOrEmpty(rules))
            {
                @:        // @param.Name 的验证规则
                @Html.Raw(rules.Replace(Environment.NewLine, Environment.NewLine + "        "))
                @:
            }
        }
        
        // 调用自定义验证规则
        CustomValidationRules();
    }

    /// <summary>
    /// 自定义验证规则（由用户实现）
    /// </summary>
    partial void CustomValidationRules();
}
    